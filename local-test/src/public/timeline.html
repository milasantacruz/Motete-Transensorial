<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Timeline Progress - Composici√≥n Temporal</title>
  <link rel="stylesheet" href="./common.css" />
  <link rel="stylesheet" href="./timeline.css" />
  <script src="https://unpkg.com/tone@14.8.39/build/Tone.js"></script>
</head>
<body>
  <header class="app-header">
    <div class="app-nav">
      <span class="brand">Aromatorio</span>
      <a href="./">Estado general</a>
      <a href="./piano.html">Piano</a>
      <a href="./timeline.html">Timeline</a>
    </div>
  </header>

  <div class="container">
    <h1>Timeline Progress - Composici√≥n Temporal</h1>

    <!-- Layout en columnas -->
    <div class="timeline-layout">
      
      <!-- Fila 1: Composiciones -->
      <div class="row compositions-row">
        <div class="composition-controls">
          <h4>Composiciones</h4>
          <div class="composition-buttons">
            <button id="saveCompositionBtn" class="btn btn-primary">üíæ Guardar</button>
            <button id="loadCompositionBtn" class="btn btn-secondary">üìÅ Cargar</button>
            <button id="clearCompositionBtn" class="btn btn-danger">üóëÔ∏è Limpiar</button>
          </div>
          
          <div class="composition-list">
            <h5>Composiciones guardadas:</h5>
            <div id="compositionsList" class="compositions-list"></div>
          </div>
        </div>
      </div>

      <!-- Fila 2: Controles, play/pause, stop, scrubber, zoom -->
      <div class="row controls-row">
        <div class="time-controls">
          <label>
            Duraci√≥n total: 
            <input type="number" id="durationInput" value="60" min="5" max="300" step="1" /> segundos
          </label>
        </div>
        
        <div class="transport-buttons">
          <button id="playPauseBtn">‚ñ∂Ô∏è Play</button>
          <button id="stopBtn">‚èπÔ∏è Stop</button>
        </div>
        
        <div class="time-display">
          <span id="currentTime">00:00</span> / <span id="totalTime">01:00</span>
          <span id="toneStatus" class="tone-status">üéµ Inactivo</span>
        </div>
        
        <div class="scrubber-container">
          <input type="range" id="scrubber" min="0" max="60" value="0" step="0.1" />
        </div>
        
        <div class="zoom-controls">
          <button id="zoomInBtn">üîç+ Zoom In</button>
          <button id="zoomOutBtn">üîç- Zoom Out</button>
          <span>Zoom: <span id="zoomLevel">100%</span></span>
        </div>
        
        <div class="refresh-controls">
          <button id="refreshBtn">üîÑ Actualizar</button>
        </div>
        
        <div class="simulation-controls">
          <label>
            <input type="checkbox" id="simulateCheckbox" />
            Modo simulaci√≥n
          </label>
        </div>
      </div>

      <!-- Fila 3: Timeline unificado -->
      <div class="row timeline-row">
        <div class="column timeline-column">
          <div class="timeline-section">
            <h3>L√≠nea de Tiempo</h3>
            <div class="timeline-container">
              <!-- Bot√≥n agregar aroma dentro del canvas -->
              <div class="timeline-header">
                <button id="addAromaBtn">‚ûï Agregar Aroma</button>
                <div class="aroma-count">
                  <span id="aromaCount">Aromas: 0</span>
                </div>
              </div>
              <!-- Canvas del timeline -->
              <canvas id="timelineCanvas" width="1000" height="300"></canvas>
              <!-- Contenedor de aromas dentro del timeline -->
              <div id="aromasContainer" class="aromas-panel">
                <!-- Aromas se crear√°n din√°micamente aqu√≠ -->
              </div>
            </div>
          </div>
        </div>
      </div>
      
    </div>

  </div>
  <script src="./cache-manager.js"></script>
  <script src="./timeline.js"></script>
</body>
</html>